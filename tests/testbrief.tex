\providecommand{\documentclassflag}{}
\documentclass[12pt,\documentclassflag]{lawbrief} 

\usepackage[margin=1in]{geometry}
\usepackage{newcent,microtype}
\usepackage{setspace,xcolor}
\usepackage[hyperindex=false,linkbordercolor=white,pdfborder={0 0 0}]{hyperref}
\usepackage{test}
\usepackage{showexpl} % LTXexample blocks

%%Cases
\makeandletter
\citecase{Ashcroft v. American Civil Liberties Union, 535 U.S. 564 (2002)}


\begin{document}

\section{Testing the brief}
\subsection{Test newlist}
\begin{LTXexample}
  \listadd{\newlist}{a}
  \listadd{\newlist}{a}
  \listadd{\newlist}{a}
  \listadd{\newlist}{a}
  newlist = (\listjoin{\newlist})
\end{LTXexample}  

\subsection{Test shortname}
\begin{LTXexample}
  shortcasename = (\deriveShortCaseName{Ashcroft v. American Civil Union})\par 
  shortcasename = (\deriveShortCaseName{Ashcroft v American Civil Union})\par 
  shortcasename = (\deriveShortCaseName{Ashcroft vs. American Civil Union})\par 
  shortcasename = (\deriveShortCaseName{Ashcroft v. American Civil 
    Union})\par 
  shortcasename = (\deriveShortCaseName{Ashcroft v American Civil 
    Union})\par 
  shortcasename = (\deriveShortCaseName{Ashcroft vs. American Civil 
    Union})\par 
  \def\nest{\deriveShortCaseName{Ashcroft v. American Civil Union}}
  shortcasename-def = (\nest)\par 
  % An edef here throws an error.  I have no idea why
  % \edef\nest{\deriveShortCaseName{Ashcroft v. American Civil Union}}
  % shortcasename-nested = (\nest)\par 
  \newcommand\nested{\deriveShortCaseName{Ashcroft v. American Civil Union}}
  shortcasename-newcommand = (\nested)\par 
\end{LTXexample}
\subsection{Test parseCitations}
\begin{LTXexample}
  Basic test\par
  parseCitations: (\parseCitations{123 reporter1 234; 345 reporter2
    456}) parens should be empty\par 
  reporters: \listjoin\reporters\par 
  start pages: \listjoin\startpages\par
  \hrule\par
  Can we do it again? Will reporters and pages reset?\par
  parseCitations: (\parseCitations{123 reporter1 234; 345 reporter2
    456}) parens should empty\par 
  reporters: \listjoin\reporters\par 
  start pages: \listjoin\startpages\par 
  \hrule\par
  Can we parse citations stored in a macro?\par
  \def\citations{123 reporter1 234; 345 reporter2 456}
  parseCitations: (\parseCitations{\citations}) parens should be empty\par 
  reporters: \listjoin\reporters\par 
  start pages: \listjoin\startpages\par 
\end{LTXexample}

\subsection{Test case parsing}
\begin{LTXexample}
  \def\cont#1#2#3#4#5{%
    \par%
    short name: (#1)\par%
    case name: (#2)\par%
    reporters: (#3)\par%
    start pages: (#4)\par%
    parenthetical: (#5)\par%
  }
  % \parseCase{Ashcroft v. American Civil Liberties Union, 535 U.S. 564
  %   (2002)}{\cont}\par

  % \vspace{5mm}
  % \par\parseCase{Ashcroft v. American Civil Liberties Union, 535 U.S. 564;
  %   123 nw2d 456 (2002)}{\cont}
\end{LTXexample}


\subsection{Test FullName}

Check full name.

\assert[FullName]{(\FullName{Ashcroft})}{(Ashcroft v. American Civil Liberties Union)}

Check full name in parens 

\edef\x{(\FullName{Ashcroft})}
\assert{\x}{(Ashcroft v. American Civil Liberties Union)}

Check full name w/o parens 

\assert[FullName]{\FullName{Ashcroft}}{Ashcroft v. American Civil Liberties Union}

% \strassertx[FullName]{\FullName{Ashcroft}}{Ashcroft v. American Civil Liberties Union}

% \strasserty[FullName]{\FullName{Ashcroft}}{Ashcroft v. American Civil Liberties Union}

\subsection{Test cite}

{\makeatletter%
  \def\a{\@bbCaseLongCite{Ashcroft}{}}%
  \def\b{\emph{Ashcroft v. American Civil Liberties Union}, 535 U.S. 564 (2002)}%
  \def\b{Ashcroft v. American Civil Liberties Union, 535 U.S. 564 (2002)}%
  % \assert{\a}{\b}
}

% \assert{\cite[l]{Ashcroft}}{\cite[l]{Ashcroft}}
% \assert{\cite[l]{Ashcroft}}{\cite[l]{Ashcroft}} 

% \def\x{(\cite[l]{Ashcroft})}
% \assert{(\cite[l]{Ashcroft})}{\x}

% \let\y\x 
% \assert{(\cite[l]{Ashcroft})}{\y}

%assert[sanity]{\cite[l]{Ashcroft}}{\cite[l]{Ashcroft}}


% \strasserty[FullName]{(\FullName{Ashcroft})}{(Ashcroft v. American Civil Liberties Union)}

% \strassert[FullName]{(\FullName{Ashcroft})}{(Ashcroft v. American Civil Liberties Union)}

Check cite

% \assert{\cite[l]{Ashcroft}}{Ashcroft v. American Civil Liberties Union, 535 U.S. 564 (2002)}
%\strassert{\cite[l]{Ashcroft}}{{\em Ashcroft v. American Civil Liberties Union}, 535 U.S. 564 (2002)}


\end{document}
