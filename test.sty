
\usepackage{xstring} % IfEq, StrCompare

\newcounter{tst}

\newcommand\assert[3][]{{% add a block to prevent namespace pollution 
    % \ttfamily 
    \def\name{\if\relax#1\relax\detokenize{#2} = \detokenize{#3}\else #1\fi}%
    \def\desc{\space Test:\,\stepcounter{tst}\thetst~(\name)\par}%
    \comparestrict%
    \IfEq{#2}{#3}{\textcolor{green}{Passed} \desc}%
    {\textcolor{red}{Failed} \desc%
    \par~~~~~~~~#2 $\ne$ \par~~~~~~~~#3\par%
    First difference at position args \comparestrict\StrCompare{#2}{#3}\par}\vspace{5mm}}}

